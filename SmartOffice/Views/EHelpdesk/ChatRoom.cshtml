
@{
    ViewData["Title"] = "ChatRoom";
    Layout = "~/Views/Shared/_LayoutHelpdesk.cshtml";
}

<style>
    /* Set padding to keep content from hitting the edges */
    .body-content {
        padding-left: 15px;
        padding-right: 15px;
        border: 1px solid #eee;
        border-radius: 3px;
        height: 100%;
    }
    /* Override the default bootstrap behavior where horizontal description lists
       will truncate terms that are too long to fit in the left column
    */
    .dl-horizontal dt {
        white-space: normal;
    }
    /* Set width on the form input elements since they're 100% wide by default */
    input,
    select,
    textarea {
        max-width: 960px;
    }

    button:focus {
        outline: 0;
    }

    .form-control {
        height: 40px;
    }

    .lr-container {
        background: white;
        border: 1px solid #ccc;
        border-radius: 2px;
        margin: 0 auto;
        padding: 20px;
        position: relative;
        top: 50%;
        -moz-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        -o-transform: translateY(-50%);
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
        overflow: hidden;
    }

    .login-container {
        width: 350px;
        max-height: 450px;
        height: 430px;
    }

        .login-container #profile-img {
            width: 96px;
            height: 96px;
            display: block;
            -moz-border-radius: 50%;
            -webkit-border-radius: 50%;
            border-radius: 50%;
            margin: 20px auto;
        }

        .login-container .btn-signin {
            width: 100%;
            height: 36px;
            background: #5d8a9e;
            color: white;
            font-weight: bold;
        }



    .validation-summary-errors ul {
        list-style: none;
        margin: 0 0 10px 0;
        padding: 0;
        text-align: center;
    }

    .clearfix {
        clear: left;
    }

    .col-md-2 {
        padding: 0;
    }

    .col-md-7 {
        width: 61.3%;
    }

    .col-md-3 {
        width: 22%;
    }

    span {
        color: #ddd;
    }

        span:hover {
            color: white;
        }

    .main-container {
        max-width: 1060px;
        height: 100%;
        background: white;
        margin: 0 auto;
        border: 1px solid #ccc;
        border-radius: 2px;
    }

        .main-container .left {
            background: #157cce;
            height: 100%;
            color: white;
        }

            .main-container .left a {
                color: #eee;
            }

                .main-container .left a:hover {
                    text-decoration: none;
                }

            .main-container .left .header {
                height: 40px;
            }

                .main-container .left .header h5 {
                    margin: 0;
                    padding: 0;
                    font-weight: bold;
                    font-size: 12px;
                    text-indent: 10px;
                    line-height: 40px;
                    text-transform: uppercase;
                    color: #eee;
                }

                .main-container .left .header #create-room {
                    position: absolute;
                    right: 15px;
                    top: 8px;
                }

                    .main-container .left .header #create-room span {
                        font-size: 10px;
                        font-weight: 200;
                        color: #eee;
                        border: 2px solid #eee;
                        padding: 1px;
                        width: 17px;
                        height: 17px;
                        border-radius: 9px;
                        text-indent: 1px;
                        line-height: 8px;
                    }

                        .main-container .left .header #create-room span:hover {
                            color: white;
                        }

            .main-container .left #room-list {
                list-style: none;
                margin: 0;
                padding: 0;
            }

                .main-container .left #room-list span {
                    font-size: 10px;
                    line-height: 12px;
                    margin: 0;
                    padding: 0;
                }

                .main-container .left #room-list li {
                    text-indent: 10px;
                }

                    .main-container .left #room-list li a {
                        float: left;
                        width: 100%;
                        font-size: 14px;
                        line-height: 24px;
                    }

                        .main-container .left #room-list li a:before {
                            content: "#";
                        }

                        .main-container .left #room-list li a:hover {
                            background: #8abde6;
                        }

                        .main-container .left #room-list li a.active,
                        .main-container .left #room-list div.active {
                            background: #8abde6;
                            text-decoration: none;
                        }

            .main-container .left img.avatar-icon2 {
                width: 36px;
                height: 36px;
                border-radius: 22px;
                border: 2px solid white;
                padding: 1px;
            }

            .main-container .left .user {
                background: #1a6baa;
                padding: 0 5px;
                float: left;
                width: 100%;
                height: 50px;
                line-height: 50px;
                position: absolute;
                bottom: 0;
            }

            .main-container .left .user-avatar {
                float: left;
                margin-right: 5px;
            }

            .main-container .left .user-name {
                float: left;
            }

                .main-container .left .user-name a {
                    display: inline-block;
                    max-width: 105px;
                    white-space: nowrap;
                    overflow: hidden !important;
                    -ms-text-overflow: ellipsis;
                    -o-text-overflow: ellipsis;
                    text-overflow: ellipsis;
                    font-size: 13px;
                }

            .main-container .left .user-signout {
                float: right;
                width: 18px;
            }

        .main-container .middle {
            margin: 0;
            padding: 0;
            height: 80vh;
        }

            .main-container .middle .chat-header {
                height: 40px;
                border-bottom: 1px solid #eee;
            }

                .main-container .middle .chat-header h5 {
                    margin: 0;
                    padding: 0;
                    line-height: 40px;
                    text-indent: 10px;
                    font-size: 18px;
                    font-weight: 500;
                    color: #555;
                    font-family: "Trebuchet MS";
                }

                    .main-container .middle .chat-header h5:before {
                        content: "#";
                    }

                .main-container .middle .chat-header .btnDeleteRoom {
                    position: absolute;
                    top: 12px;
                    right: 8px;
                    border: none;
                    background: transparent;
                    color: #AAA;
                    font-size: 14px;
                    font-weight: 400;
                }

                    .main-container .middle .chat-header .btnDeleteRoom:hover {
                        color: red;
                    }

            .main-container .middle .chat-body {
                position: absolute;
                border-bottom: 1px solid #eee;
                width: 100%;
                padding: 10px 0;
                top: 40px;
                bottom: 50px;
                background: white;
                float: left;
                overflow-y: scroll;
            }

                .main-container .middle .chat-body ul {
                    list-style: none;
                    margin: 0;
                    padding: 0;
                    float: left;
                    width: 100%;
                }

                    .main-container .middle .chat-body ul li {
                        float: left;
                        width: 100%;
                    }

                .main-container .middle .chat-body .chat-message {
                    margin: 10px;
                    min-width: 200px;
                }

                    .main-container .middle .chat-body .chat-message .message-avatar {
                        width: 40px;
                        height: 40px;
                        float: left;
                        margin-right: 10px;
                        border-radius: 21px;
                    }

                    .main-container .middle .chat-body .chat-message .message-content {
                        background: #f5f5f5;
                        padding: 3px 8px;
                        border: 1px solid #eee;
                        border-radius: 2px;
                        color: #777;
                        display: table-cell;
                        min-width: 220px;
                        max-width: 500px;
                    }

                        .main-container .middle .chat-body .chat-message .message-content span {
                            color: #777;
                        }

                        .main-container .middle .chat-body .chat-message .message-content .author {
                            color: #1a6baa;
                            font-size: 12px;
                            font-weight: bold;
                        }

                        .main-container .middle .chat-body .chat-message .message-content .content {
                            display: block;
                            padding: 2px 0;
                        }

                        .main-container .middle .chat-body .chat-message .message-content .timestamp {
                            font-size: 10px;
                            color: #999;
                            float: right;
                            line-height: 21px;
                        }

                .main-container .middle .chat-body .ismine .left-side {
                    float: right;
                    margin-right: 0;
                    margin-left: 10px;
                }

                .main-container .middle .chat-body .ismine .message-content {
                    float: right;
                    background: #8abde6;
                }

                    .main-container .middle .chat-body .ismine .message-content .author,
                    .main-container .middle .chat-body .ismine .message-content .timestamp,
                    .main-container .middle .chat-body .ismine .message-content .timestamp span,
                    .main-container .middle .chat-body .ismine .message-content .content {
                        color: white;
                    }

                    .main-container .middle .chat-body .ismine .message-content span.timestamp {
                        float: left;
                    }

                    .main-container .middle .chat-body .ismine .message-content span.author {
                        float: right;
                        padding-top: 2px;
                    }

                    .main-container .middle .chat-body .ismine .message-content span.content {
                        clear: left;
                    }

            .main-container .middle .chat-input {
                width: 100%;
                height: 50px;
                padding: 0;
                margin: 0;
                line-height: 50px;
                position: absolute;
                bottom: 0;
            }

                .main-container .middle .chat-input .glyphicon {
                    position: absolute;
                    right: 20px;
                    line-height: 48px;
                    color: #aaa;
                    font-size: 18px;
                }

                .main-container .middle .chat-input .emoticon-container {
                    width: 145px;
                    background: white;
                    height: 60px;
                    border: 1px solid #ccc;
                    position: absolute;
                    right: 54px;
                    bottom: 32px;
                    padding: 5px 7px;
                    line-height: 20px;
                }

                    .main-container .middle .chat-input .emoticon-container a {
                        float: left;
                        height: 24px;
                        margin-left: 4px;
                    }

                .main-container .middle .chat-input .actions {
                    position: absolute;
                    right: 45px;
                }

                    .main-container .middle .chat-input .actions img {
                        margin: 0 2px;
                    }

                .main-container .middle .chat-input input {
                    float: left;
                    width: 100%;
                    height: 50px;
                    border: none;
                    text-indent: 10px;
                    background: #f2f2f2;
                }

        .main-container .right {
            height: 100%;
            min-height: 100%;
            margin: 0;
            padding: 0;
        }

            .main-container .right .header {
                height: 40px;
            }

                .main-container .right .header h5 {
                    margin: 0;
                    padding: 0;
                    line-height: 40px;
                    text-indent: 10px;
                    font-size: 16px;
                    color: #555;
                    font-family: "Segoe UI";
                    font-weight: 400;
                    text-transform: uppercase;
                    border-bottom: 1px solid #eee;
                    border-left: 1px solid #eee;
                }

                    .main-container .right .header h5 span {
                        color: #555;
                    }

                        .main-container .right .header h5 span:hover {
                            text-decoration: none;
                        }

            .main-container .right .chat-users {
                width: 100%;
                border-bottom: 1px solid #eee;
                position: absolute;
                top: 40px;
                bottom: 50px;
                overflow: hidden;
                overflow-y: scroll;
            }

                .main-container .right .chat-users #user-list {
                    list-style: none;
                    margin: 0;
                    padding: 0;
                    overflow: hidden;
                }

                    .main-container .right .chat-users #user-list li {
                        float: left;
                        width: 100%;
                    }

                .main-container .right .chat-users .user-inner {
                    float: left;
                    padding: 8px 3px;
                    width: 100%;
                    cursor: pointer;
                }

                    .main-container .right .chat-users .user-inner:hover {
                        background: #eee;
                    }

                    .main-container .right .chat-users .user-inner .left-side {
                        float: left;
                        padding-left: 6px;
                    }

                    .main-container .right .chat-users .user-inner span {
                        display: block;
                        color: #555;
                    }

                    .main-container .right .chat-users .user-inner .right-side {
                        float: left;
                        margin-left: 5px;
                        display: table-cell;
                        line-height: 15px;
                    }

                        .main-container .right .chat-users .user-inner .right-side small {
                            font-size: 12px;
                            color: #777;
                        }

                .main-container .right .chat-users .user-avatar {
                    width: 32px;
                    height: 32px;
                    border-radius: 17px;
                }

            .main-container .right .search-user {
                height: 50px;
                position: absolute;
                bottom: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border-left: 1px solid #ccc;
            }

                .main-container .right .search-user input {
                    border-radius: 0;
                    border: none;
                    height: 50px;
                    line-height: 50px;
                    width: 100%;
                    background: #f5f5f5;
                    text-indent: 10px;
                }

    .better-scrollbar::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        border-radius: 6px;
        background-color: #F5F5F5;
    }

    .better-scrollbar::-webkit-scrollbar {
        width: 8px;
        background-color: #F5F5F5;
    }

    .better-scrollbar::-webkit-scrollbar-thumb {
        border-radius: 6px;
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        background-color: #8abde6;
    }

    #errorAlert {
        position: fixed;
        min-width: 300px;
        top: 0;
        z-index: 10;
        left: 50%;
        width: 18em;
        margin-left: -9em;
        text-align: center;
        margin-top: 100px
    }

        #errorAlert p {
            font-size: 14px;
        }

    .emoji {
        width: 16px;
        height: 16px;
    }

    input[type="file"] {
        display: none;
    }

    .custom-file-upload {
        cursor: pointer;
    }

    .post-image {
        max-width: 250px;
        max-height: 200px;
        background: white;
        border: 2px solid white;
    }
    /*# sourceMappingURL=Site.css.map */
</style>
<br /><br />
<section class="content">
    <div class="row main-container">
        <div class="col-md-2 left" style="height:80vh">
            <div class="alert alert-dismissible alert-warning hidden" id="errorAlert">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <p data-bind="text:serverInfoMessage"></p>
            </div>
            <div class="header">
                <h5>Chat Rooms</h5>
                <a href="#" id="create-room" data-toggle="modal" data-target="#create-room-modal"><i class="fas fa-plus"></i></a>
            </div>
            <div class="rooms">
                <div>
                    <ul id="room-list" data-bind="foreach: chatRooms">
                        <li><a href="#" data-bind="text: $data.name, clickLink: joinRoom"></a></li>
                    </ul>
                </div>
            </div>
            <div class="user">
                <div class="user-avatar">
                    <img class="avatar-icon2" src="~/image/icons/avatar1.png" data-bind="attr: { src: myAvatar() }" />
                </div>
                <div class="user-name">
                    <a href="#" data-bind="text: myName"></a>
                </div>
                
            </div>
        </div>
        <div class="col-md-7 middle">
            <div class="chat-header">

                <h5 id="joinedRoom">Lobby</h5>
                <button data-toggle="modal" data-target="#remove-room-modal" class="btnDeleteRoom"><i class="fas fa-trash"></i></button>
            </div>
            <div class="chat-body better-scrollbar">
                <ul data-bind="foreach: chatMessages">
                    <li>
                        <div class="chat-message" data-bind="css: $data.isMine() === true ? 'ismine' : 'isother'">
                            <div class="left-side">
                                <img src="~/image/icons/avatar1.png" class="message-avatar" data-bind="attr: { src: $data.avatar }" />
                            </div>
                            <div class="message-content">
                                <span class="author" data-bind="text:$data.from"></span>
                                <span class="timestamp">
                                    <i class="fas far fa-clock"></i>
                                    <span data-bind="text:$data.timestamp"></span>
                                </span>
                                <span class="content" data-bind="html:$data.content"></span>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="chat-input">
                <i class="glyphicon glyphicon-send"></i>
                <div class="actions">
                    <label for="btnUpload" class="custom-file-upload">
                        <img src="~/image/icons/photo1.png" alt="" />
                    </label>
                    <input type="file" id="btnUpload" accept="image/*" name="files" />
                    <a id="emojibtn" href="#"><img src="~/image/icons/smile1.png" /></a>
                </div>
                <div class="emoticon-container hidden" id="emojis-container">
                    <a href="#">
                        <input type="hidden" value=":)" />
                        <img src="~/image/emojis/emoji1.png" />
                    </a>
                    <a href="#">
                        <input type="hidden" value=":P" />

                        <img src="~/image/emojis/emoji2.png" />
                    </a>
                    <a href="#">
                        <input type="hidden" value=":O" />
                        <img src="~/image/emojis/emoji3.png" />
                    </a>
                    <a href="#">
                        <input type="hidden" value=":-)" />
                        <img src="~/image/emojis/emoji4.png" />
                    </a>
                    <a href="#">
                        <input type="hidden" value="B|" />
                        <img src="~/image/emojis/emoji5.png" />
                    </a>
                    <a href="#">
                        <input type="hidden" value=":D" />
                        <img src="~/image/emojis/emoji6.png" />
                    </a>
                    <a href="#">
                        <input type="hidden" value="<3" />
                        <img src="~/image/emojis/emoji7.png" />
                    </a>
                </div>
                <input id="chat-message" type="text" value="" data-bind="value:message, valueUpdate: 'afterkeydown', event: { keypress: onEnter }" placeholder="What's on your mind?" />
            </div>
        </div>
        <div class="col-md-3 right" style="height:80vh">
            <div class="header">
                <h5>Who's Here (<span data-bind="text: filteredChatUsers().length">0</span>)</h5>
            </div>
            <div class="chat-users better-scrollbar">
                <ul id="user-list" data-bind="foreach: filteredChatUsers">
                    <li>
                        <div class="user-inner">
                            <div class="left-side">
                                <img src="~/image/icons/avatar1.png" data-bind="attr: { src:$data.avatar }" class="user-avatar" />
                            </div>
                            <div class="right-side">
                                <input type="hidden" class="username" data-bind="value:$data.userName" />
                                <span class="author" data-bind="text: $data.displayName"></span>
                                <small data-bind="text: $data.device"></small>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="search-user">
                <input type="text" class="" placeholder="Search someone..." data-bind="value: filter, valueUpdate: 'afterkeydown'" />
            </div>
        </div>
    </div>
    <!-- CREATE ROOM MODAL -->


</section>
<div class="modal fade" id="create-room-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Create Room</h4>
            </div>
            <div class="modal-body">
                <input type="text" class="form-control" id="roomName" placeholder="Room name">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" data-bind="click: createRoom">Create</button>
            </div>
        </div>
    </div>
</div>





<!-- REMOVE ROOM MODAL -->
<div class="modal fade" id="remove-room-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Delete Room</h4>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this Chat Room?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal" data-bind="click: deleteRoom">Yes</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script src="~/js/knockout-3.4.2.js"></script>
    <script src="~/js/View/EhelpdeskScript/MyScript.js"></script>
    <script src="~/js/View/EhelpdeskScript/MyChat.js"></script>
    <script src="~/lib/aspnet/signalr/dist/browser/signalr.js"></script>
}